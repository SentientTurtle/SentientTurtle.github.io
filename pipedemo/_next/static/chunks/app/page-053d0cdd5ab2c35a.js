(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6148:function(e,t,r){Promise.resolve().then(r.bind(r,990))},990:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return L}});var l,a,n,i,d,o,s,c,u=r(7437),p=r(2265),m=r(6816),h=r(1611),f=r(105);async function g(e,t){return fetch(t,{credentials:"omit"}).then(async t=>t.ok?(t.type,{fromNode:e,kind:d.Ok,value:await t.text()}):{fromNode:e,kind:d.Err,error:t.status+" "+t.statusText}).catch(t=>{if("string"==typeof t)return{fromNode:e,kind:d.Err,error:t};if("string"==typeof t.message)return{fromNode:e,kind:d.Err,error:t.message};if("function"==typeof t.toString)return{fromNode:e,kind:d.Err,error:t.toString()};try{return{fromNode:e,kind:d.Err,error:String(t)}}catch(r){return{fromNode:e,kind:d.Err,error:"unknown error: "+typeof t}}})}function x(e){let{id:t,selected:r,data:{pipeValue:l,handles:a,onPipeUpdate:n}}=e;return(0,p.useEffect)(()=>{l.kind!=d.Ok&&n({fromNode:t,kind:d.Ok,value:e=>({"text-out":['\n<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <meta charset="UTF-8">\n        <title>\n            Demo Document\n        </title>\n    </head>\n    <body>\n        <div class="column">\n            <div class="title">\n                Demo Document\n            </div>\n            <div class="navbar">\n                <button>Navigation 1</button>\n                <button>Navigation 2</button>\n                <button>Navigation 3</button>\n            </div>\n            <div class="content">\n                <div class="item">\n                    <div class="item-title">\n                        Item 1\n                    </div>\n                    <div class="item-author">\n                        Author\n                    </div>\n                    <div class="item-content">\n                        Lorem ipsum\n                    </div>\n                    <a class="item-link" href="http://demo.example/item1.html">http://demo.example/item1.html</a>\n                </div>\n                <div class="item">\n                    <div class="item-title">\n                        Item 2\n                    </div>\n                    <div class="item-author">\n                        Author\n                    </div>\n                    <div class="item-content">\n                        dolor sit amet\n                    </div>\n                    <a class="item-link" href="http://demo.example/item2.html">http://demo.example/item2.html</a>\n                </div>\n                <div class="item">\n                    <div class="item-title">\n                        Item 3\n                    </div>\n                    <div class="item-author">\n                        Author\n                    </div>\n                    <div class="item-content">\n                        consectetur adipiscing elit\n                    </div>\n                    <a class="item-link" href="http://demo.example/item3.html">http://demo.example/item3.html</a>\n                </div>\n            </div>\n        </div>\n    </body>\n</html>\n']})})}),(0,u.jsx)(b,{selected:r,label:"Demo Document Input",pipeValue:l,handles:a})}function v(e){return e.length>5?e.substring(0,4)+"â€¦":e}function b(e){let t,r,l,{selected:a,label:n,pipeValue:i,handles:s,children:c}=e;function p(e,t){let r=[],l={};for(let t of e)void 0!=t.group?(l[t.group]||(l[t.group]=[]),l[t.group].push(t)):r.push(t);let a=1/(1+e.length+2*Object.keys(l).length),n=0,i=[];for(let e of r)n+=1,i.push((0,u.jsx)(m.HH,{type:t,position:"target"==t?m.Ly.Left:m.Ly.Right,id:e.id,className:"px-1 flex items-center",style:{top:"".concat(n*a*100,"%"),backgroundColor:e.optional?o.Optional:o.Normal},title:e.label,children:v(e.label)},e.id));for(let e in l){n+=1;let r="source"==t?"right":"left",d="source"==t?"Right":"Left";for(let s of(i.push((0,u.jsx)("div",{className:"absolute -translate-y-1/2 bg-white z-10",style:{top:"".concat(n*a*100,"%"),[r]:"0.5rem"},children:e},n)),i.push((0,u.jsx)("div",{className:"absolute border-2 border-black rounded-lg w-14 z-0",style:{top:"".concat(n*a*100,"%"),[r]:"0",height:(l[e].length+1)*a*100+"%",["border"+r]:"0",["borderTop"+d+"Radius"]:"0",["borderBottom"+d+"Radius"]:"0"}},n+.5)),l[e]))n+=1,i.push((0,u.jsx)(m.HH,{type:t,position:"target"==t?m.Ly.Left:m.Ly.Right,id:s.id,className:"px-1 flex items-center",style:{top:"".concat(n*a*100,"%"),backgroundColor:s.optional?o.Optional:o.Normal},title:s.label,children:v(s.label)},s.id));n+=1}return[i,n]}t=a?" border-black":i.kind===d.Err?" border-red-500":" border-gray-400",r=s.target.length>0?s.target.some(e=>void 0!=e.group)?"3.5rem":"3.25rem":"0.25rem",l=s.source.length>0?s.source.some(e=>void 0!=e.group)?"3.5rem":"3.25rem":"0.25rem";let[h,f]=p(s.source,"source"),[g,x]=p(s.target,"target");return(0,u.jsxs)("div",{className:"flex flex-col bg-white gap-1 p-1 rounded border-[3px] "+t,style:{paddingLeft:r,paddingRight:l,minHeight:(Math.max(f,x)+2)*1.5+"rem"},children:[(0,u.jsx)("div",{children:n}),(0,u.jsx)("div",{className:"flex flex-col gap-1 items-left",children:void 0!=c?c:[]}),h,g]})}function y(e){let{id:t,selected:r,data:{pipeValue:l,handles:a,onPipeUpdate:n}}=e,i=(0,p.useId)();return(0,u.jsxs)(b,{selected:r,label:"HTML Input",pipeValue:l,handles:a,children:[(0,u.jsx)("label",{htmlFor:i,hidden:!0,children:"URL"}),(0,u.jsx)("input",{id:i,type:"url",placeholder:"URL",onKeyDown:e=>{"Enter"===e.key&&e.currentTarget.blur()},onBlur:e=>{e.currentTarget.validity.valid?g(t,e.currentTarget.value).then(e=>{let t=function(e,t){switch(e.kind){case d.Ok:return{fromNode:e.fromNode,kind:d.Ok,value:t(e.value)};case d.BadConfig:case d.Err:return e}}(e,e=>t=>({"html-out":[e]}));n(t)}):n({fromNode:t,kind:d.BadConfig})},pattern:"https?:\\/\\/.+\\..+",className:"nodrag border-gray-500 border-2 rounded valid:border-green-500 valid:bg-green-200 invalid:border-red-500 invalid:bg-red-200 ps-2 placeholder-gray-500",required:!0})]})}function N(e){let{id:t,selected:r,data:{pipeValue:l,handles:a,onPipeUpdate:n}}=e,i=(0,p.useId)();return(0,u.jsxs)(b,{selected:r,label:"Text Input",pipeValue:l,handles:a,children:[(0,u.jsx)("label",{htmlFor:i,hidden:!0,children:"Text"}),(0,u.jsx)("textarea",{id:i,placeholder:"Text",onBlur:e=>{if(e.currentTarget.validity.valid){let r=e.currentTarget.value;n({fromNode:t,kind:d.Ok,value:()=>({"text-out":[r]})})}else n({fromNode:t,kind:d.BadConfig})},className:"nodrag resize border-gray-500 border-2 rounded valid:border-green-500 valid:bg-green-200 invalid:border-red-500 invalid:bg-red-200 ps-2 placeholder-gray-500",required:!0})]})}function j(e){let{id:t,selected:r,data:{pipeValue:l,handles:a,onPipeUpdate:n}}=e,i=(0,p.useId)(),o=(0,p.useId)(),s=(0,p.useId)(),c=(0,p.useId)(),m=(0,p.useId)(),h=(0,p.useRef)(""),[f,g]=(0,p.useState)(null),[x,v]=(0,p.useState)({ignorecase:!1,multiline:!1,dotall:!1,unicode:!1}),y=(0,p.useCallback)(e=>{let t=e.currentTarget.name;v(e=>({...e,[t]:!e[t]}))},[]);return(0,p.useEffect)(()=>{if(null!=f)try{let e="g"+(x.ignorecase?"i":"")+(x.multiline?"m":"")+(x.dotall?"s":"")+(x.unicode?"u":""),r=new RegExp(f,e);n({fromNode:t,kind:d.Ok,value:function(e){let{"data-in":t}=e,l=t.flatMap(e=>{let t=[];for(let l of e.matchAll(r))l.length>1?t.push(...l.slice(1)):t.push(...l);return t});return{"data-out":l}}})}catch(e){n({fromNode:t,kind:d.Err,error:e.message})}else n({fromNode:t,kind:d.BadConfig})},[f,x,n,t]),(0,u.jsxs)(b,{selected:r,label:"Regex",pipeValue:l,handles:a,children:[(0,u.jsx)("label",{htmlFor:i,hidden:!0,children:"Regex"}),(0,u.jsx)("input",{id:i,name:"regex",type:"text",placeholder:"regex",onKeyDown:e=>{"Enter"===e.key&&e.currentTarget.blur()},onBlur:e=>{let t=e.currentTarget.value;if(t.length>0&&t!=h.current){h.current=t;try{new RegExp(t),g(t),e.currentTarget.setCustomValidity(""),e.currentTarget.reportValidity()}catch(t){console.log(t),g(null),e.currentTarget.setCustomValidity("Invalid Regex"),e.currentTarget.reportValidity()}}},className:"nodrag border-gray-500 border-2 rounded valid:border-green-500  valid:bg-green-200 invalid:border-red-500 invalid:bg-red-200 ps-2",required:!0}),(0,u.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,u.jsx)("input",{type:"checkbox",name:"ignorecase",id:o,checked:x.ignorecase,onChange:y}),(0,u.jsx)("label",{htmlFor:o,children:"Ignore Case"})]}),(0,u.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,u.jsx)("input",{type:"checkbox",name:"multiline",id:s,checked:x.multiline,onChange:y}),(0,u.jsx)("label",{htmlFor:s,children:"Multi-line"})]}),(0,u.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,u.jsx)("input",{type:"checkbox",name:"dotall",id:c,checked:x.dotall,onChange:y}),(0,u.jsx)("label",{htmlFor:c,children:"Dot matches newline"})]}),(0,u.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,u.jsx)("input",{type:"checkbox",name:"unicode",id:m,checked:x.unicode,onChange:y}),(0,u.jsx)("label",{htmlFor:m,children:"Unicode"})]})]})}function k(e){let{id:t,selected:r,data:{pipeValue:l,handles:a,onPipeUpdate:n}}=e,i=(0,p.useId)(),o=(0,p.useId)(),c=(0,p.useRef)(""),[m,h]=(0,p.useState)(null),[f,g]=(0,p.useState)(s.HTML);return(0,p.useEffect)(()=>{if(null!=m)try{n({fromNode:t,kind:d.Ok,value:function(e){let{"data-in":t}=e,r=[],l=new DOMParser;for(let e of t)try{let t=l.parseFromString(e,f==s.HTML?"text/html":"text/xml"),a=t.evaluate(m,t,null,XPathResult.ANY_TYPE);switch(a.resultType){case XPathResult.NUMBER_TYPE:r.push(a.numberValue.toString());break;case XPathResult.STRING_TYPE:r.push(a.stringValue);break;case XPathResult.BOOLEAN_TYPE:r.push(a.booleanValue.toString());break;case XPathResult.UNORDERED_NODE_ITERATOR_TYPE:let n=a.iterateNext();for(;n;)n instanceof Element?r.push(n.outerHTML):n instanceof Text&&r.push(n.wholeText.trim()),n=a.iterateNext()}}catch(e){}return{"data-out":r}}})}catch(e){n({fromNode:t,kind:d.Err,error:e.message})}else n({fromNode:t,kind:d.BadConfig})},[m,f,n,t]),(0,u.jsxs)(b,{selected:r,label:"XPath",pipeValue:l,handles:a,children:[(0,u.jsx)("label",{htmlFor:i,hidden:!0,children:"XPath"}),(0,u.jsx)("input",{id:i,name:"xpath",type:"text",placeholder:"XPath",onKeyDown:e=>{"Enter"===e.key&&e.currentTarget.blur()},onBlur:e=>{let t=e.currentTarget.value;if(t.length>0&&t!=c.current){c.current=t;try{let r=new Document;r.evaluate(t,r),h(t),e.currentTarget.setCustomValidity(""),e.currentTarget.reportValidity()}catch(t){h(null),e.currentTarget.setCustomValidity("Invalid XPath"),e.currentTarget.reportValidity()}}},className:"nodrag border-gray-500 border-2 rounded valid:border-green-500  valid:bg-green-200 invalid:border-red-500 invalid:bg-red-200 ps-2",required:!0}),(0,u.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,u.jsx)("label",{htmlFor:o,children:"Feed type"}),(0,u.jsx)("select",{id:o,name:"parsemode",placeholder:"Parsing mode",value:f,onChange:e=>{s[e.currentTarget.value]&&g(e.currentTarget.value)},className:"nodrag border-gray-500 border-2 rounded ps-2",required:!0,children:Object.entries(s).map((e,t)=>{let[r,l]=e;return(0,u.jsx)("option",{value:r,children:l},t)})})]})]})}function w(e){let{id:t,selected:r,data:{pipeValue:l,handles:a,onPipeUpdate:n}}=e,[i,o]=(0,p.useState)(c.RSS),s=(0,p.useId)();return(0,p.useEffect)(()=>{try{n({fromNode:t,kind:d.Ok,value:function(e){var t,r;let l;let{title:a,link:n,description:d,language:o,"item-title":s,"item-link":u,"item-description":p,"item-author":m}=e,[h,f]=[l=document.implementation.createDocument(null,null),function(e,t,r,a){let n=l.createElement(e);if(void 0!=t)for(let e of t)n.appendChild(e);if(void 0!=r)for(let e in r)n.setAttribute(e,r[e]);if(void 0!=a){let e=l.createTextNode(a);n.appendChild(e)}return n}];switch(i){case c.Atom:{let e=[],r=Math.max(s.length,null!==(t=null==p?void 0:p.length)&&void 0!==t?t:0);for(let t=0;t<r;t++)e.push(f("entry",[...void 0!=s[t]?[f("title",[],{type:"text"},s[t])]:[],...void 0!=u[t]?[f("link",[],{href:u[t]})]:[],...(null==p?void 0:p[t])!=void 0?[f("summary",[],{type:"text"},p[t])]:[],...(null==m?void 0:m[t])!=void 0?[f("author",[f("name",[],{type:"text"},m[t])])]:[]]));let l=f("feed",[f("title",[],{type:"text"},a[0]),f("subtitle",[],{type:"text"},d[0]),f("link",[],{href:n[0]}),...e],{xmlns:"http://www.w3.org/2005/Atom",...void 0!=o?{lang:o[0]}:{}});h.appendChild(l);break}case c.RSS:{let e=[],t=Math.max(s.length,null!==(r=null==p?void 0:p.length)&&void 0!==r?r:0);for(let r=0;r<t;r++)e.push(f("item",[...void 0!=s[r]?[f("title",[],{},s[r])]:[],...void 0!=u[r]?[f("link",[],{},u[r])]:[],...(null==p?void 0:p[r])!=void 0?[f("description",[],{},p[r])]:[],...(null==m?void 0:m[r])!=void 0?[f("author",[],{},m[r])]:[]]));let l=f("rss",[f("channel",[f("title",[],{},a[0]),f("link",[],{},n[0]),f("description",[],{},d[0]),...void 0!=o?[f("language",[],{},o[0])]:[],...e])]);h.appendChild(l)}}return{"feed-out":[new XMLSerializer().serializeToString(h)]}}})}catch(e){n({fromNode:t,kind:d.Err,error:e.message})}},[i,t,n]),(0,u.jsx)(b,{selected:r,label:"Feed Output",pipeValue:l,handles:{target:a.target,source:[]},children:(0,u.jsxs)("div",{className:"flex gap-1",children:[(0,u.jsx)("label",{htmlFor:s,children:"Feed type"}),(0,u.jsx)("select",{id:s,name:"feedtype",placeholder:"Feed type",value:i,onChange:e=>{c[e.currentTarget.value]&&o(e.currentTarget.value)},className:"nodrag border-gray-500 border-2 rounded ps-2",required:!0,children:Object.entries(c).map((e,t)=>{let[r,l]=e;return(0,u.jsx)("option",{value:r,children:l},t)})})]})})}r(715),(l=d||(d={}))[l.Ok=0]="Ok",l[l.BadConfig=1]="BadConfig",l[l.Err=2]="Err",x.displayName="Demo Document Input",x.handles={source:[{id:"text-out",label:"HTML"}],target:[]},(a=o||(o={})).Normal="#784be8",a.Optional="#298415",y.displayName="HTML Input",y.handles={source:[{id:"html-out",label:"HTML"}],target:[]},N.displayName="Text Input",N.handles={source:[{id:"text-out",label:"Text"}],target:[]},j.displayName="Regex",j.handles={source:[{id:"data-out",label:"OUT"}],target:[{id:"data-in",label:"IN"}]},(n=s||(s={})).HTML="HTML",n.XML="XML",k.displayName="XPath",k.handles={source:[{id:"data-out",label:"OUT"}],target:[{id:"data-in",label:"IN"}]},(i=c||(c={})).RSS="RSS",i.Atom="Atom",w.handles={source:[{id:"feed-out",label:"Feed"}],target:[{id:"title",label:"Title",group:"feed"},{id:"link",label:"Link",group:"feed"},{id:"description",label:"Description",group:"feed"},{id:"language",label:"Language",group:"feed",optional:!0},{id:"item-title",label:"Title",group:"item"},{id:"item-link",label:"Link",group:"item"},{id:"item-description",label:"Description",group:"item",optional:!0},{id:"item-author",label:"Author",group:"item",optional:!0}]};let T={demoInputNode:x,htmlInputNode:y,textInputNode:N,regexNode:j,xpathNode:k,feedOutputNode:w},E=Object.fromEntries(Object.entries(T).map(e=>{let[t,r]=e;if(void 0!=r.handles)return[t,r.handles];throw Error("Each node must have handles specified!")}));function C(e,t,r,l,a){return{id:e,type:t,position:r,deletable:l,data:{pipeValue:{kind:d.BadConfig},onPipeUpdate:a,handles:E[t]}}}function O(e){let{isError:t=!1,children:r}=e;return t?(0,u.jsx)("div",{className:"flex flex-col w-full p-1 items-center justify-center",children:(0,u.jsx)("div",{className:"p-1 rounded bg-red-50 border-red-500 border-2 flex flex-col items-center justify-center",children:r})}):(0,u.jsx)("div",{className:"flex flex-col w-full p-1 items-center justify-center",children:(0,u.jsx)("div",{className:"p-1 rounded flex flex-col items-center justify-center bg-gray-50",children:r})})}function R(e){let{nodeTypes:t,addNode:r}=e;return(0,u.jsx)("div",{className:"flex flex-wrap divide-x divide-gray-900",children:t.map((e,t)=>{let[l,a]=e;return(0,u.jsx)("button",{className:"flex-grow bg-gray-400 hover:bg-gray-500",onClick:()=>r(l),children:a},t)})})}function I(e){let{handles:t,pipe:r}=e,l=[],a={};for(let e of t)if(void 0==e.group)l.push(e);else{var n;(a[e.group]=null!==(n=a[e.group])&&void 0!==n?n:[]).push(e)}function i(e,t){return e.map(e=>{let r=e.optional?o.Optional:o.Normal,l=t[e.id];return void 0!=l||e.optional?void 0==l&&e.optional?(0,u.jsxs)("div",{className:"border-2 flex flex-col items-start w-full",style:{borderColor:r},children:[(0,u.jsx)("div",{className:"p-1 rounded-br text-white",style:{backgroundColor:r},children:e.label}),(0,u.jsx)("div",{className:"flex flex-col w-full p-1 items-start justify-center",children:(0,u.jsx)("div",{className:"p-1 rounded bg-gray-50 flex flex-col items-center justify-center",children:"No Input"})})]},e.id):(0,u.jsxs)("div",{className:"border-2 flex flex-col items-start w-full",style:{borderColor:r},children:[(0,u.jsx)("div",{className:"p-1 rounded-br text-white",style:{backgroundColor:r},children:e.label}),(0,u.jsx)("div",{className:"flex flex-col w-full divide-y-2 divide-gray-400",children:l.map((e,t)=>0==e.length?(0,u.jsx)("div",{className:"m-1",children:(0,u.jsx)("i",{children:"<empty string>"})},t):0!=e.trim().length?(0,u.jsx)("div",{className:"m-1",children:e},t):1!=e.length?(0,u.jsx)("div",{className:"m-1",children:(0,u.jsxs)("i",{children:["<space \xd7",e.length,">"]})},t):(0,u.jsx)("div",{className:"m-1",children:(0,u.jsx)("i",{children:"<space>"})},t))})]},e.id):(0,u.jsxs)("div",{className:"border-2 flex flex-col items-start w-full",style:{borderColor:r},children:[(0,u.jsx)("div",{className:"p-1 rounded-br text-white",style:{backgroundColor:r},children:e.label}),(0,u.jsx)("div",{className:"flex flex-col w-full p-1 items-start justify-center",children:(0,u.jsx)("div",{className:"p-1 rounded bg-red-50 border-red-500 border-2 flex flex-col items-center justify-center",children:"Input Missing"})})]},e.id)})}return[...i(l,r),Object.entries(a).map(e=>{let[t,l]=e;return(0,u.jsxs)("div",{className:"border-blue-400 border-2 flex flex-col items-start w-full",children:[(0,u.jsx)("div",{className:"p-1 bg-blue-400 rounded-br",children:t}),(0,u.jsx)("div",{className:"flex flex-col w-full items-center justify-center gap-1",children:i(l,r)})]},t)})]}function L(){let e=(0,p.useCallback)(e=>{switch(x.current=!1,e.kind){case d.Ok:a(t=>({...t,[e.fromNode]:{...t[e.fromNode],data:{...t[e.fromNode].data,pipeValue:{kind:d.Ok,mapper:e.value}}}}));break;case d.BadConfig:a(t=>({...t,[e.fromNode]:{...t[e.fromNode],data:{...t[e.fromNode].data,pipeValue:{kind:d.BadConfig}}}}));break;case d.Err:a(t=>({...t,[e.fromNode]:{...t[e.fromNode],data:{...t[e.fromNode].data,pipeValue:{kind:d.Err,error:e.error}}}}))}},[]),t=(0,p.useRef)(0),r={Feed:C("Feed","feedOutputNode",{x:600,y:50},!1,e)},[l,a]=(0,p.useState)(r),[n,i]=(0,p.useState)([]),o=(0,p.useCallback)(e=>{e.some(e=>"remove"==e.type||"add"==e.type)&&(x.current=!1),a(t=>(0,m.Fb)(e,Object.values(t)).reduce((e,t)=>({...e,[t.id]:t}),{}))},[a]),s=(0,p.useCallback)(e=>{e.some(e=>"remove"==e.type||"add"==e.type)&&(x.current=!1),i(t=>(0,m.yn)(e,t))},[i]),c=(0,p.useCallback)(e=>{e.source!=e.target&&i(t=>{for(let r of t)if(r.source==e.source&&r.target==e.target&&r.sourceHandle==e.sourceHandle&&r.targetHandle==e.targetHandle)return t;return e.animated=!0,x.current=!1,(0,m.Z_)(e,t)})},[i]),g=(0,p.useRef)({}),x=(0,p.useRef)(!1),v=(0,p.useCallback)(e=>{if(g.current[e])return g.current[e];{let r,a=l[e].data.handles.target,i={};for(let r of n)if(r.target==e){var t;let e=null===(t=v(r.source).output)||void 0===t?void 0:t[r.sourceHandle];void 0!=e&&(i[r.targetHandle]?i[r.targetHandle].push(...e):i[r.targetHandle]=e)}let o=l[e].data.handles.source,s=l[e].data.pipeValue;e:switch(s.kind){case d.BadConfig:r={kind:"error",input:i,error:"Node configuration is invalid"};break;case d.Err:r={kind:"error",input:i,error:s.error};break;case d.Ok:for(let e of a)if(!e.optional&&(void 0==i[e.id]||0==i[e.id].length)){r={kind:"error",input:i,error:"Missing input"};break e}try{let t=s.mapper(i);for(let r of o)if(void 0==t[r.id])throw Error("Missing output data for node "+e+" handle "+r.id);r={kind:"output",input:i,output:t}}catch(e){console.log("ERR in node implementation: ",e),r={kind:"error",input:i,error:"Error in node implementation"}}}return g.current[e]=r,r}},[n,l]);if(!x.current){for(let e in g.current={},l)v(e);x.current=!0}let b=Object.values(l).filter(e=>e.selected).map(e=>e.id);return(0,u.jsxs)("div",{className:"flex flex-col h-screen w-screen",children:[(0,u.jsx)("div",{className:"flex flex-row resize-y overflow-auto h-2/4 justify-center",children:(()=>{if(1!=b.length)return(0,u.jsx)(O,{children:"Select a node"});{let[e]=b,t=l[e],r=g.current[e];if(void 0==r)return(0,u.jsx)(O,{isError:!0,children:"Internal error: No cache"});{let e=[],l=t.data.handles.target.length>0;switch(l&&e.push((0,u.jsxs)("div",{className:"flex flex-col gap-2 pt-2 resize-x w-2/4 overflow-y-scroll overflow-x-clip break-all items-center",children:[(0,u.jsx)("div",{className:"px-1 rounded bg-gray-50",children:"Input"}),(0,u.jsx)(I,{handles:t.data.handles.target,pipe:r.input})]},1)),r.kind){case"output":l?e.push((0,u.jsxs)("div",{className:"flex flex-col gap-2 pt-2 grow resize-width-zero overflow-y-scroll overflow-x-clip break-all items-center",children:[(0,u.jsx)("div",{className:"px-1 rounded bg-gray-50",children:"Output"}),(0,u.jsx)(I,{handles:t.data.handles.source,pipe:r.output})]},2)):e.push((0,u.jsxs)("div",{className:"flex flex-col gap-2 pt-2 w-2/4 overflow-y-scroll overflow-x-clip break-all items-center",children:[(0,u.jsx)("div",{className:"px-1 rounded bg-gray-50",children:"Output"}),(0,u.jsx)(I,{handles:t.data.handles.source,pipe:r.output})]},2));break;case"error":l?e.push((0,u.jsxs)("div",{className:"flex flex-col gap-2 pt-2 grow resize-width-zero overflow-y-scroll overflow-x-clip break-all items-center",children:[(0,u.jsx)("div",{className:"px-1 rounded bg-gray-50",children:"Output"}),(0,u.jsxs)(O,{isError:!0,children:[(0,u.jsx)("div",{className:"bg-red-400 text-white rounded px-2",children:"Error"}),(0,u.jsx)("div",{children:r.error})]})]},2)):e.push((0,u.jsxs)("div",{className:"flex flex-col gap-2 pt-2 w-2/4 overflow-y-scroll overflow-x-clip break-all items-center",children:[(0,u.jsx)("div",{className:"px-1 rounded bg-gray-50",children:"Output"}),(0,u.jsxs)(O,{isError:!0,children:[(0,u.jsx)("div",{className:"bg-red-400 text-white rounded px-2",children:"Error"}),(0,u.jsx)("div",{children:r.error})]})]},2))}return e}}})()}),(0,u.jsx)(R,{nodeTypes:Object.entries(T).flatMap(e=>{let[t,r]=e;return"feedOutputNode"==t?[]:void 0!=r.displayName?[[t,r.displayName]]:"anonymous"!=r.name&&r.name.length>0?[[t,r.name]]:[[t,t]]}),addNode:r=>{let l=t.current++;o([{type:"add",item:C(l.toString(),r,{x:100+25*(l%10),y:100+25*(l%10)},!0,e)}])}}),(0,u.jsxs)(m.x$,{className:"bg-gray-50 grow resize-height-zero",nodeTypes:T,nodes:Object.values(l),edges:n,onNodesChange:o,onEdgesChange:s,onConnect:c,deleteKeyCode:["Backspace","Delete"],children:[(0,u.jsx)(h.Z,{}),(0,u.jsx)(f.A,{variant:f.T.Dots,gap:12,size:1})]})]})}}},function(e){e.O(0,[780,203,971,864,744],function(){return e(e.s=6148)}),_N_E=e.O()}]);